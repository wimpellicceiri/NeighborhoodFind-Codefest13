var subdivNames = [];
subdivNames[00724] = "Aleppo township";
subdivNames[03320] = "Aspinwall";
subdivNames[03608] = "Avalon";
subdivNames[03928] = "Baldwin";
subdivNames[03932] = "Baldwin township";
subdivNames[05216] = "Bell Acres";
subdivNames[05312] = "Bellevue";
subdivNames[05504] = "Ben Avon";
subdivNames[05520] = "Ben Avon Heights";
subdivNames[06064] = "Bethel Park";
subdivNames[07000] = "Blawnox";
subdivNames[07976] = "Brackenridge";
subdivNames[07992] = "Braddock";
subdivNames[08008] = "Braddock Hills";
subdivNames[08064] = "Bradford Woods";
subdivNames[08416] = "Brentwood";
subdivNames[08624] = "Bridgeville";
subdivNames[11336] = "Carnegie";
subdivNames[11680] = "Castle Shannon";
subdivNames[12496] = "Chalfant";
subdivNames[13392] = "Cheswick";
subdivNames[13608] = "Churchill";
subdivNames[13704] = "Clairton city";
subdivNames[15216] = "Collier township";
subdivNames[16144] = "Coraopolis";
subdivNames[16848] = "Crafton";
subdivNames[17048] = "Crescent township";
subdivNames[19576] = "Dormont";
subdivNames[19856] = "Dravosburg";
subdivNames[20432] = "Duquesne city";
subdivNames[21024] = "East Deer township";
subdivNames[21444] = "East McKeesport";
subdivNames[21712] = "East Pittsburgh";
subdivNames[22520] = "Edgewood";
subdivNames[22576] = "Edgeworth";
subdivNames[22992] = "Elizabeth";
subdivNames[23000] = "Elizabeth township";
subdivNames[23616] = "Emsworth";
subdivNames[24160] = "Etna";
subdivNames[25400] = "Fawn township";
subdivNames[25904] = "Findlay township";
subdivNames[26592] = "Forest Hills";
subdivNames[26896] = "Forward township";
subdivNames[27120] = "Fox Chapel";
subdivNames[27552] = "Franklin Park";
subdivNames[27608] = "Frazer township";
subdivNames[29432] = "Glassport";
subdivNames[29592] = "Glenfield";
subdivNames[29732] = "Glen Osborne";
subdivNames[31256] = "Green Tree";
subdivNames[32328] = "Hampton township";
subdivNames[32624] = "Harmar township";
subdivNames[32832] = "Harrison township";
subdivNames[33312] = "Haysville";
subdivNames[33592] = "Heidelberg";
subdivNames[35424] = "Homestead";
subdivNames[36808] = "Indiana township";
subdivNames[37000] = "Ingram";
subdivNames[37955] = "Jefferson Hills";
subdivNames[39312] = "Kennedy township";
subdivNames[39624] = "Kilbuck township";
subdivNames[42368] = "Leet township";
subdivNames[42392] = "Leetsdale";
subdivNames[43064] = "Liberty";
subdivNames[43408] = "Lincoln";
subdivNames[45900] = "McCandless township";
subdivNames[46072] = "McDonald";
subdivNames[46256] = "McKeesport city";
subdivNames[46264] = "McKees Rocks";
subdivNames[47696] = "Marshall township";
subdivNames[49920] = "Millvale";
subdivNames[50528] = "Monroeville";
subdivNames[50784] = "Moon township";
subdivNames[51696] = "Mount Lebanon township";
subdivNames[51744] = "Mount Oliver";
subdivNames[52320] = "Munhall";
subdivNames[53136] = "Neville township";
subdivNames[54816] = "North Braddock";
subdivNames[55016] = "North Fayette township";
subdivNames[55488] = "North Versailles township";
subdivNames[55840] = "Oakdale";
subdivNames[56088] = "Oakmont";
subdivNames[56384] = "O'Hara township";
subdivNames[56392] = "Ohio township";
subdivNames[59032] = "Penn Hills township";
subdivNames[59152] = "Pennsbury Village";
subdivNames[60272] = "Pine township";
subdivNames[60712] = "Pitcairn";
subdivNames[61000] = "Pittsburgh city";
subdivNames[61328] = "Pleasant Hills";
subdivNames[61536] = "Plum";
subdivNames[62320] = "Port Vue";
subdivNames[63408] = "Rankin";
subdivNames[64240] = "Reserve township";
subdivNames[64528] = "Richland township";
subdivNames[65352] = "Robinson township";
subdivNames[66264] = "Ross township";
subdivNames[66320] = "Rosslyn Farms";
subdivNames[68388] = "Scott township";
subdivNames[69376] = "Sewickley";
subdivNames[69400] = "Sewickley Heights";
subdivNames[69416] = "Sewickley Hills";
subdivNames[69584] = "Shaler township";
subdivNames[69776] = "Sharpsburg";
subdivNames[72160] = "South Fayette township";
subdivNames[72400] = "South Park township";
subdivNames[72568] = "South Versailles township";
subdivNames[72960] = "Springdale";
subdivNames[72968] = "Springdale township";
subdivNames[74648] = "Stowe township";
subdivNames[75816] = "Swissvale";
subdivNames[76104] = "Tarentum";
subdivNames[76560] = "Thornburg";
subdivNames[77272] = "Trafford";
subdivNames[77912] = "Turtle Creek";
subdivNames[79274] = "Upper St. Clair township";
subdivNames[80032] = "Verona";
subdivNames[80040] = "Versailles";
subdivNames[80600] = "Wall";
subdivNames[82800] = "West Deer township";
subdivNames[82848] = "West Elizabeth";
subdivNames[83200] = "West Homestead";
subdivNames[83512] = "West Mifflin";
subdivNames[84144] = "West View";
subdivNames[84440] = "Whitaker";
subdivNames[84512] = "Whitehall";
subdivNames[84704] = "White Oak";
subdivNames[85184] = "Wilkins township";
subdivNames[85188] = "Wilkinsburg";
subdivNames[85496] = "Wilmerding";

var tractNames = [];
tractNames[010300] = "Bluff";
tractNames[020100] = "Central Business District";
tractNames[020300] = "Strip District";
tractNames[030500] = "Crawford-Roberts";
tractNames[040200] = "Terrace Village";
tractNames[040400] = "North Oakland";
tractNames[040500] = "Central Oakland";
tractNames[040600] = "Central Oakland";
tractNames[040900] = "South Oakland";
tractNames[050100] = "Middle Hill";
tractNames[050600] = "Upper Hill";
tractNames[050900] = "Bedford Dwellings";
tractNames[051000] = "Terrace Village";
tractNames[051100] = "Terrace Village";
tractNames[060300] = "Lower Lawrenceville";
tractNames[060500] = "Polish Hill";
tractNames[070300] = "Shadyside";
tractNames[070500] = "Shadyside";
tractNames[070600] = "Shadyside";
tractNames[070800] = "Shadyside";
tractNames[070900] = "Shadyside";
tractNames[080200] = "Bloomfield";
tractNames[080400] = "Bloomfield";
tractNames[080600] = "Bloomfield";
tractNames[080700] = "Friendship";
tractNames[080900] = "Bloomfield";
tractNames[090100] = "Central Lawrenceville";
tractNames[090200] = "Central Lawrenceville";
tractNames[090300] = "Bloomfield";
tractNames[100500] = "Stanton Heights";
tractNames[101100] = "Upper Lawrenceville";
tractNames[101400] = "Morningside";
tractNames[101600] = "Garfield";
tractNames[101700] = "Garfield";
tractNames[101800] = "Stanton Heights";
tractNames[110200] = "Highland Park";
tractNames[110600] = "Highland Park";
tractNames[111300] = "East Liberty";
tractNames[111400] = "Garfield";
tractNames[111500] = "East Liberty";
tractNames[120300] = "Lincoln-Lemington-Belmar";
tractNames[120400] = "Larimer";
tractNames[120700] = "Homewood West";
tractNames[120800] = "Larimer";
tractNames[130100] = "Homewood North";
tractNames[130200] = "Homewood North";
tractNames[130300] = "Homewood South";
tractNames[130400] = "Homewood South";
tractNames[130600] = "East Hills";
tractNames[140100] = "Squirrel Hill North";
tractNames[140200] = "Squirrel Hill North";
tractNames[140300] = "Squirrel Hill North";
tractNames[140400] = "Point Breeze";
tractNames[140500] = "Point Breeze North";
tractNames[140600] = "Point Breeze";
tractNames[140800] = "Squirrel Hill South";
tractNames[141000] = "Regent Square";
tractNames[141100] = "Swisshelm Park";
tractNames[141300] = "Squirrel Hill South";
tractNames[141400] = "Squirrel Hill South";
tractNames[151600] = "Greenfield";
tractNames[151700] = "Greenfield";
tractNames[160800] = "Southside Slopes";
tractNames[160900] = "Southside Flats";
tractNames[170200] = "Southside Flats";
tractNames[170600] = "Southside Slopes";
tractNames[180300] = "Allentown";
tractNames[180700] = "Mount Washington";
tractNames[190300] = "Mount Washington";
tractNames[191100] = "Duquesne Heights";
tractNames[191400] = "Mount Washington";
tractNames[191500] = "Mount Washington";
tractNames[191600] = "Beechview";
tractNames[191700] = "Brookline";
tractNames[191800] = "Brookline";
tractNames[191900] = "Brookline";
tractNames[192000] = "Beechview";
tractNames[202200] = "Sheraden";
tractNames[202300] = "Banksville";
tractNames[210700] = "Manchester";
tractNames[220600] = "Central Northside";
tractNames[240600] = "Troy Hill";
tractNames[241200] = "Spring Garden";
tractNames[250300] = "Central Northside";
tractNames[250700] = "California-Kirkbride";
tractNames[250900] = "Fineview";
tractNames[260200] = "Perry North";
tractNames[260700] = "Perry North";
tractNames[260900] = "Northview Heights";
tractNames[261200] = "Summer Hill";
tractNames[261400] = "Perry South";
tractNames[261500] = "Perry South";
tractNames[262000] = "Spring Hill-City View";
tractNames[270100] = "Brighton Heights";
tractNames[270300] = "Brighton Heights";
tractNames[270400] = "Marshall-Shadeland";
tractNames[270800] = "Brighton Heights";
tractNames[271500] = "Marshall-Shadeland";
tractNames[281400] = "Crafton Heights";
tractNames[281500] = "Crafton Heights";
tractNames[290100] = "Carrick";
tractNames[290200] = "Carrick";
tractNames[290400] = "Carrick";
tractNames[300100] = "Knoxville";
tractNames[310200] = "Lincoln Place";
tractNames[310300] = "New Homestead";
tractNames[320400] = "Overbrook";
tractNames[320600] = "Brookline";
tractNames[320700] = "Overbrook";
tractNames[561600] = "Arlington";
tractNames[561700] = "Mt. Oliver";
tractNames[561900] = "Lincoln-Lemington-Belmar";
tractNames[562000] = "North Oakland";
tractNames[562300] = "Hazelwood";
tractNames[562400] = "Beltzhoover";
tractNames[562500] = "Esplen";
tractNames[562600] = "Elliot";
tractNames[562700] = "Allegheny Center";
tractNames[562800] = "East Carnegie";
tractNames[562900] = "Hays";
tractNames[563000] = "Windgap";
tractNames[563100] = "Westwood";
tractNames[563200] = "North Shore";
tractNames[980000] = "Lincoln-Lemington-Belmar";
tractNames[980100] = "Highland Park";
tractNames[980300] = "Squirrel Hill South";
tractNames[980400] = "Perry North";
tractNames[980500] = "Squirrel Hill South";
tractNames[980600] = "Chateau";
tractNames[980700] = "South Shore";
tractNames[980800] = "South Oakland";
tractNames[980900] = "Marshall-Shadeland";
tractNames[981000] = "Central Lawrenceville";
tractNames[981100] = "Point Breeze";
tractNames[981200] = "North Shore";
tractNames[981800] = "Lincoln-Lemington-Belmar";
tractNames[982200] = "North Oakland";

var filterProperties = [];
filterProperties["B25058_001E"] = "";
filterProperties["B25064_001E"] = "Median Gross Rent (Dollars)";
filterProperties["B25077_001E"] = "Median Value (Dollars) for Owner-Occupied Housing Units";
filterProperties["B07011_001E"] = "Median Income by Geographical Mobility in the Past Year for Current Residence in the U.S.";
filterProperties["B25010_001E"] = "Average Household Size of Occupied Housing Units by Tenure";
filterProperties["B25103_001E"] = "MORTGAGE STATUS BY MEDIAN REAL ESTATE TAXES PAID (DOLLARS)";
filterProperties["B01002_001E"] = "Median Age by Sex";
filterProperties["B23025_003E"] = "Total Labor Force";
filterProperties["B23025_004E"] = "Employed";
filterProperties["B23025_005E"] = "Unemployed";

var sortByData = function (a, b) {
    var x = a.Data;
    var y = b.Data;
    return ((x < y) ? -1 : ((x > y) ? 1 : 0));
}

var subdivFinished = false;
var tractFinished = false;
var finished = function () {
    return subdivFinished && tractFinished;
}


var entireDataSet = [];
var baseURL = "http://api.census.gov/data/2011/acs5?key=76ed37dffda422d9b83fd9d277827451fb4ef1cc&get=B25058_001E,B25064_001E,B25077_001E,B07011_001E,B25010_001E,B25103_001E,B01002_001E,B23025_001E,B23025_003E,B23025_004E,B23025_005E";
var subdivDataURL = baseURL + "&for=county+subdivision:*&in=state:42+county:003";
var propertyData = {};
$.ajax({
    url: subdivDataURL,
    dataType: "json",
    async: false,
    success: function (data) {
        $.each(data, function (dataIndex, dataValue) {
            if (dataIndex > 0) {
                entireDataSet[dataIndex] = dataValue; // populate main data structure
                $.each(data[0], function (propertyIndex, propertyName) {
                    if (propertyData[propertyName.toString()] == null) {
                        propertyData[propertyName.toString()] = []; // create blank array to hold property data
                    }
                    propertyData[propertyName.toString()].push({ ID: dataIndex, Data: parseFloat(dataValue[propertyIndex]) });
                });
            }
        });
    }
});

var tractDataURL = baseURL + "&for=tract:*&in=state:42+county:003";
$.ajax({
    url: tractDataURL,
    dataType: "json",
    async: false,
    success: function (data) {
        $.each(data, function (dataIndex, dataValue) {
            if (dataIndex > 0) {
                entireDataSet[dataIndex] = dataValue; // populate main data structure
                $.each(data[0], function (propertyIndex, propertyName) {
                    if (propertyData[propertyName.toString()] == null) {
                        propertyData[propertyName.toString()] = []; // create blank array to hold property data
                    }
                    propertyData[propertyName.toString()].push({ ID: dataIndex, Data: parseFloat(dataValue[propertyIndex]) });
                });
            }
        });
    }
});

// sort property data structures
$.each(propertyData, function () {
    this.sort(sortByData);
});

/*var loadData = function () {
    $.when(subdivAJAX(), tractAJAX()).done(function () {
        // sort property data structures
        $.each(propertyData, function () {
            this.sort(sortByData);
        });
    });
}

$.when(loadData()).done(function () {
    alert(subdivData.length);
});
*/
